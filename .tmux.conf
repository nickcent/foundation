# ──────────────────────────────────────────────────────────
# Tmux Configuration
# ──────────────────────────────────────────────────────────

# ─── PREFIX KEY ───────────────────────────────────────────
# Default is Ctrl-b, which is awkward to reach.
# Ctrl-a is one key closer and a classic choice.
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# ─── MOUSE ────────────────────────────────────────────────
# Scroll with mouse wheel, click panes to focus, drag to resize.
set -g mouse on

# ─── COLORS & TERMINAL ───────────────────────────────────
# Tell tmux your terminal supports true color (24-bit).
# This makes Ghostty + tmux display colors correctly.
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-ghostty:Tc,xterm-256color:Tc"

# ─── SCROLLBACK ──────────────────────────────────────────
# Default is 2000 lines. 50k gives you plenty of history.
set -g history-limit 50000

# ─── NUMBERING ───────────────────────────────────────────
# Start windows and panes at 1 instead of 0 (matches keyboard layout).
set -g base-index 1
setw -g pane-base-index 1
# Renumber windows when one is closed (no gaps).
set -g renumber-windows on

# ─── SPLITS ──────────────────────────────────────────────
# | for vertical split, - for horizontal. Much more intuitive.
# Opens new panes in the same directory as the current pane.
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# New windows also open in current directory.
bind c new-window -c "#{pane_current_path}"

# ─── PANE NAVIGATION ─────────────────────────────────────
# Move between panes with Alt + arrow keys (no prefix needed).
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# ─── PANE RESIZING ───────────────────────────────────────
# Prefix + arrow keys to resize in 5-cell increments.
bind -r Up resize-pane -U 5
bind -r Down resize-pane -D 5
bind -r Left resize-pane -L 5
bind -r Right resize-pane -R 5

# ─── VI MODE ─────────────────────────────────────────────
# Use vim keys (h/j/k/l) when scrolling and selecting text.
# Enter scroll mode: Ctrl-a then [
# Search: / or ?     Navigate: n/N
# Select: v          Copy: y
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# ─── RESPONSIVENESS ──────────────────────────────────────
# Reduce escape delay (important for vim/neovim users).
set -sg escape-time 0
# Faster key repetition.
set -g repeat-time 300

# ─── STATUS BAR ──────────────────────────────────────────
# Clean, minimal status bar.
set -g status-position bottom
set -g status-style "bg=default,fg=#666666"
set -g status-left "#[fg=#aaaaaa,bold] #S "
set -g status-right "#[fg=#666666] %H:%M "
set -g status-left-length 20
set -g status-right-length 20

# Active window highlighted.
setw -g window-status-current-style "fg=#ffffff,bold"
setw -g window-status-current-format " #I:#W "
setw -g window-status-format " #I:#W "

# ─── RELOAD CONFIG ───────────────────────────────────────
# Prefix + r to reload this file instantly.
bind r source-file ~/.tmux.conf \; display-message "Config reloaded."
