
#
# foundation...
#

export HISTSIZE=100000
export SAVEHIST=100000
HISTFILE=~/.zsh_history
setopt INC_APPEND_HISTORY
setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt EXTENDED_HISTORY

autoload -Uz edit-command-line
zle -N edit-command-line
bindkey '^X^E' edit-command-line

autoload -Uz compinit && compinit -C
source <(carapace _carapace)

alias f=yazi
alias ffplay='ffplay -loglevel quiet -nodisp -autoexit'
alias fffplay='ffplay -loglevel quiet -af "atempo=1.5" -nodisp -autoexit'
alias ga="git add"
alias gcam="ga . && ../foundation/skill-runner/skill run commit-messager | pbcopy && git commit && gp"
alias gd="git diff"
alias gdu=gdu-go
alias gp="git push"
alias grep=rg
alias gst="git status"
alias la="ls -lah --git"
alias lat="la -T"
alias ls="eza --git-ignore"
alias lzd=lazydocker
alias lzg=lazygit
alias v=nvim
alias vi=nvim
alias y=yazi

function fupd() {
    echo "updating foundation tools..."
    brew update && brew upgrade
    nvim --headless "+Lazy! update" +qa
    uv self update
    uv tool upgrade "dvc[gdrive]"
    claude update
}

set -o vi # enable vim motions in shell text

export EDITOR=nvim
export VISUAL=nvim
export API_TIMEOUT_MS=900000 

source <(fzf --zsh)
export FZF_DEFAULT_COMMAND='fd --type f --strip-cwd-prefix --hidden --follow --exclude .git'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
_fzf_compgen_path() {
  fd --hidden --follow --exclude ".git" . "$1"
}
_fzf_compgen_dir() {
  fd --type d --hidden --follow --exclude ".git" . "$1"
}

eval "$(atuin init zsh)"
eval "$(zoxide init zsh --cmd cd)"
eval "$(direnv hook zsh)"
eval "$(starship init zsh)"

